<!--Copyright 2021 Rob Royce-->

<!--Licensed under the Apache License, Version 2.0 (the "License");-->
<!--you may not use this file except in compliance with the License.-->
<!--You may obtain a copy of the License at-->

<!--http://www.apache.org/licenses/LICENSE-2.0-->

<!--Unless required by applicable law or agreed to in writing, software-->
<!--distributed under the License is distributed on an "AS IS" BASIS,-->
<!--WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.-->
<!--See the License for the specific language governing permissions and-->
<!--limitations under the License.-->


<div class="row">
  <div class="col s12">
    <form>
      <mat-form-field class="website-extraction-url scale-up-center" appearance="standard" (keyup.enter)="checkUrl()">
        <mat-label>URL</mat-label>
        <input matInput placeholder="Enter a URL" #extractor [ngModelOptions]="{standalone: true}" [(ngModel)]="url"
               required>
        <mat-hint>Enter the complete URL for the page you want to extract, then press Enter.</mat-hint>
      </mat-form-field>
      <br>
      <br>
      <div class="extraction-status-bar center">
        <mat-progress-bar mode="indeterminate" *ngIf="validating" style="width: 100%"></mat-progress-bar>
      </div>
      <div *ngIf="validUrl && websiteKS">
        <div class="row" *ngIf="websiteKS.icon">
          <div class="col s2">
            <img [src]="websiteKS.icon" alt="">
          </div>
        </div>

        <div class="row">
          <div class="col s12">
            <mat-form-field>
              <mat-label>Title</mat-label>
              <input matInput [ngModelOptions]="{standalone: true}" [(ngModel)]="title">
              <mat-hint>Enter a title for the extracted content.</mat-hint>
            </mat-form-field>
          </div>
        </div>

        <ks-lib-ingest-import-selector [currentProject]="currentProject"
                                       (selection)="setDestination($event)">
        </ks-lib-ingest-import-selector>

        <div class="row">
          <div class="col s12">
            <mat-accordion>
              <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    Advanced
                  </mat-panel-title>
                </mat-expansion-panel-header>

                <app-website-extraction-advanced></app-website-extraction-advanced>

              </mat-expansion-panel>
            </mat-accordion>
          </div>
        </div>

        <div class="row right">
          <div class="col s12">
            <button mat-button color="primary" (click)="extract()">Extract</button>
            <button mat-button color="warn" (click)="cancel()">Cancel</button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
