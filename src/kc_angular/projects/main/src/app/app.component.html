<!--Copyright 2021 Rob Royce-->

<!--Licensed under the Apache License, Version 2.0 (the "License");-->
<!--you may not use this file except in compliance with the License.-->
<!--You may obtain a copy of the License at-->

<!--http://www.apache.org/licenses/LICENSE-2.0-->

<!--Unless required by applicable law or agreed to in writing, software-->
<!--distributed under the License is distributed on an "AS IS" BASIS,-->
<!--WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.-->
<!--See the License for the specific language governing permissions and-->
<!--limitations under the License.-->


<div style="height: 100%" class="mat-app-background" [class.app-theme-dark]="darkMode">
  <mat-sidenav-container class="sidenav-container">
    <mat-sidenav #drawer [attr.role]="'dialog'" [mode]="'over'" [opened]="false">
      <div class="app-sidenav">
        <div class="app-sidenav-top-content">
          <mat-toolbar class="app-sidenav-toolbar center">
            <img alt="Company Logo" src="assets/img/kc-logo-transparent.svg" style="max-height: 120px"/>
          </mat-toolbar>

          <mat-divider></mat-divider>

          <div>
            <mat-nav-list (click)="drawer.close()">
              <a mat-list-item routerLink="/" routerLinkActive="active">Knowledge Canvas</a>
              <mat-divider></mat-divider>
              <a mat-list-item routerLink="/app-files" routerLinkActive="active">Files</a>
            </mat-nav-list>
          </div>
        </div>

        <div class="app-sidenav-bottom-content">
          <mat-divider></mat-divider>
          <div class="app-sidenav-footer">
            <button routerLink="/app-settings"
                    routerLinkActive="active"
                    (click)="drawer.close()"
                    mat-icon-button>
              <mat-icon>settings</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </mat-sidenav>

    <mat-sidenav-content class="app-sidenav-content">
      <mat-toolbar class="app-top-toolbar">

        <!--        NOTE: in order to get the search bar to show up dead-center, we had to force the left and right side of toolbar to be exactly the same size...-->
        <span class="left app-top-toolbar-left">
          <button mat-icon-button class="app-top-toolbar-icon" (click)="drawer.toggle()">
              <mat-icon>menu</mat-icon>
          </button>
        </span>

        <span style="width: 75%">
          <app-search-bar></app-search-bar>
        </span>

        <span class="right">
          <button matTooltip="Navigate back to the home page"
                  [matTooltipClass]="{'tool-tip':true}"
                  class="app-top-toolbar-icon"
                  matTooltipShowDelay="750"
                  (click)="homeClicked()"
                  mat-icon-button>
            <mat-icon>home</mat-icon>
          </button>
          <button matTooltip="Knowledge Canvas Settings"
                  [matTooltipClass]="{'tool-tip':true}"
                  class="app-top-toolbar-icon"
                  routerLink="/app-settings"
                  routerLinkActive="active"
                  matTooltipShowDelay="750"
                  mat-icon-button>
            <mat-icon>settings</mat-icon>
          </button>
        </span>

      </mat-toolbar>

      <div class="wrapper">
        <router-outlet></router-outlet>
      </div>

      <footer class="footer">
        <div class="left" style="width: 33%">
          <!--          TODO: make sure whatever class this is stays at 25% when we figure out what to put here...-->
        </div>
        <ks-lib-progress-bar class="kc-loading-container"></ks-lib-progress-bar>
        <div class="right app-footer-timer-container" *ngIf="timerReady">
          <mat-icon class="app-footer-timer-button"
                    matTooltip="Be mindful of your screen-time. Set a timer to give yourself a break!"
                    [matTooltipClass]="{'tool-tip':true}"
                    matTooltipShowDelay="750"
                    (click)="setTimerClicked()">timer
          </mat-icon>
          <div [matTooltip]="timerRunning ? runningTooltip : notRunningTooltip"
               class="app-footer-timer-label"
               matTooltipClass="tool-tip"
               matTooltipShowDelay="0">
          </div>
          <div class="app-footer-timer">
            {{timer}}
          </div>
          <mat-icon class="app-footer-timer-button" (click)="startTimer()" *ngIf="!timerRunning">
            play_arrow
          </mat-icon>
          <mat-icon class="app-footer-timer-button" (click)="pauseTimer()" *ngIf="timerRunning">
            pause
          </mat-icon>
        </div>
        <!--        Â© 2021 Rob Royce - All Rights Reserved-->
      </footer>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>
