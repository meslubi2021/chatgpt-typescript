<!--Copyright 2021 Rob Royce-->

<!--Licensed under the Apache License, Version 2.0 (the "License");-->
<!--you may not use this file except in compliance with the License.-->
<!--You may obtain a copy of the License at-->

<!--http://www.apache.org/licenses/LICENSE-2.0-->

<!--Unless required by applicable law or agreed to in writing, software-->
<!--distributed under the License is distributed on an "AS IS" BASIS,-->
<!--WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.-->
<!--See the License for the specific language governing permissions and-->
<!--limitations under the License.-->


<!--Adapted from: https://medium.com/@tarekabdelkhalek/how-to-create-a-drag-and-drop-file-uploading-in-angular-78d9eba0b854-->
<div class="dropzone-container">
  <div class="dropzone" ksLibDragAndDrop (fileDropped)="onFileDropped($event)">
    <input type="file" class="dropzone-input" #fileDropRef id="fileDropRef" multiple
           (change)="fileBrowseHandler($event)"/>
    <mat-icon id="fileUploadIcon">file_upload</mat-icon>
    <h3>Drag and drop file(s) here</h3>
    <h3>or</h3>
    <button mat-button mat-raised-button class="dropzone-input-button">Browse for file(s)</button>
  </div>

  <div class="files-list" *ngIf="files.length > 0">
    <div class="single-file" *ngFor="let file of fileList; let i = index">
      <mat-icon>file_present</mat-icon>
      <div class="info">
        {{file.name}}
      </div>
      <button mat-icon-button>
        <mat-icon class="delete" (click)="deleteFile(i)">delete</mat-icon>
      </button>
    </div>
  </div>

  <div class="uploadButton" *ngIf="files.length > 0">
    <button mat-button color="primary" (click)="submit()" [class.jello-vertical]="files.length > 0">
      Submit
    </button>
    <button mat-button color="warn" (click)="cancel()" [class.jello-vertical]="files.length > 0">
      Cancel
    </button>
  </div>
</div>
